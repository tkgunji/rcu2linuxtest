<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>RCU linux tools and drivers for the DCS board : dcs_driver.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>dcs_driver.h</h1><a href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">// $Id: dcs_driver.h,v 1.8 2006/05/26 12:09:07 richter Exp $</span>
<a name="l00002"></a>00002 
<a name="l00003"></a>00003 <span class="comment">/************************************************************************</span>
<a name="l00004"></a>00004 <span class="comment">**</span>
<a name="l00005"></a>00005 <span class="comment">**</span>
<a name="l00006"></a>00006 <span class="comment">** This file is property of and copyright by the Experimental Nuclear </span>
<a name="l00007"></a>00007 <span class="comment">** Physics Group, Dep. of Physics and Technology</span>
<a name="l00008"></a>00008 <span class="comment">** University of Bergen, Norway, 2004</span>
<a name="l00009"></a>00009 <span class="comment">** This file has been written by Matthias Richter,</span>
<a name="l00010"></a>00010 <span class="comment">** Matthias.Richter@ift.uib.no</span>
<a name="l00011"></a>00011 <span class="comment">**</span>
<a name="l00012"></a>00012 <span class="comment">** Permission to use, copy, modify and distribute this software and its  </span>
<a name="l00013"></a>00013 <span class="comment">** documentation strictly for non-commercial purposes is hereby granted  </span>
<a name="l00014"></a>00014 <span class="comment">** without fee, provided that the above copyright notice appears in all  </span>
<a name="l00015"></a>00015 <span class="comment">** copies and that both the copyright notice and this permission notice  </span>
<a name="l00016"></a>00016 <span class="comment">** appear in the supporting documentation. The authors make no claims    </span>
<a name="l00017"></a>00017 <span class="comment">** about the suitability of this software for any purpose. It is         </span>
<a name="l00018"></a>00018 <span class="comment">** provided "as is" without express or implied warranty.                 </span>
<a name="l00019"></a>00019 <span class="comment">**</span>
<a name="l00020"></a>00020 <span class="comment">*************************************************************************/</span>
<a name="l00021"></a>00021 
<a name="l00022"></a>00022 <span class="preprocessor">#ifndef __DCS_DRIVER_H</span>
<a name="l00023"></a>00023 <span class="preprocessor"></span><span class="preprocessor">#define __DCS_DRIVER_H</span>
<a name="l00024"></a>00024 <span class="preprocessor"></span>
<a name="l00042"></a>00042 <span class="comment">// ioctl commands</span>
<a name="l00043"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#bdd456820d3a820c1a5551a9ed223670">00043</a> <span class="preprocessor">#define IOCTL_TEST_MSGBUF_IN      0x001 // not yet implemented</span>
<a name="l00044"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#67bb430edc1fd0c5ad8e7a91524bcdb8">00044</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_TEST_MSGBUF_OUT     0x002 // not yet implemented</span>
<a name="l00045"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#20eadb9e55b3f7e54d731c8998f9d272">00045</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_GET_MSGBUF_IN_SIZE  0x003 // return the size of the message in buffer in bytes, argument is __u32*</span>
<a name="l00046"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#042440e6cfb13be6c1393fb6289b9c2b">00046</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_GET_MSGBUF_OUT_SIZE 0x004 // return the size of the message out buffer in bytes, argument is __u32*</span>
<a name="l00047"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#543fa13071d44c6431e672bae7f81a9a">00047</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_GET_REGFILE_SIZE    0x005 // return the number of the registers, argument is __u32*</span>
<a name="l00048"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#9ce2e79a5e716592c9fb72075506ed54">00048</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_GET_VERSION_V02     0x006 // the old IOCTL_GET_VERSION id, for backward compatibility</span>
<a name="l00049"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#9b5642f22157d69e6c6a26a9f56b367b">00049</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_GET_VERSION         0x010 // driver major version no, upper 16 bit of the int, minor no 16 lower bits</span>
<a name="l00050"></a>00050 <span class="preprocessor"></span>                                        <span class="comment">// arg treated as target string pointer from version 0.3 on</span>
<a name="l00051"></a>00051                                         <span class="comment">// up to version 0.2 id was 0x006</span>
<a name="l00052"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#d606612d204b94b126f4e6a1806e813d">00052</a> <span class="preprocessor">#define IOCTL_GET_VERS_STR_SIZE   0x011 // length of the version string, implemented from version 0.3 on</span>
<a name="l00053"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#727ab7673f1a15b6e3adc242466ee9b4">00053</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_SET_DEBUG_LEVEL     0x018 // not yet implemented</span>
<a name="l00054"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#6d536482fdb6b5d405d3acadd3ef469d">00054</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_SET_LOG_FILE        0x019 // not yet implemented</span>
<a name="l00055"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#d668e54ae34ce5947f23b56b14930798">00055</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_LOCK_DRIVER         0x020 // lock the driver for a sequence of commands</span>
<a name="l00056"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#851b272a7f7e402588a8f6681029ceab">00056</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_UNLOCK_DRIVER       0x021 // unlock the driver</span>
<a name="l00057"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#e856aa8dd4e4ef56c271e418141a2b5d">00057</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_RESET_LOCK          0x022 // reset the lock and release all waiting processes</span>
<a name="l00058"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#354a7ab28bf7a18640b10340c063c351">00058</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_ACTIVATE_LOCK       0x023 // activate the lock after reset</span>
<a name="l00059"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#c1dbdf63144106e0e403c79a3012ec88">00059</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_SEIZE_DRIVER        0x024 // bind the driver for a certain application</span>
<a name="l00060"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#d05cd0ea0518ffafc88731ed7240a090">00060</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_RELEASE_DRIVER      0x025 // release the driver by the occupying application</span>
<a name="l00061"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#df487c4b61442e45ea69420deaa68038">00061</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_READ_REG            0x080 // command = IOCTL_READ_REG + register address</span>
<a name="l00062"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#ef25f269bc894f3bb0993e5c75ba1256">00062</a> <span class="preprocessor"></span><span class="preprocessor">#define IOCTL_WRITE_REG           0x0c0 // command = IOCTL_READ_REG + register address</span>
<a name="l00063"></a>00063 <span class="preprocessor"></span>
<a name="l00064"></a>00064 <span class="comment">// access mode</span>
<a name="l00065"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#a39572541652583b87c0dbbf67d4650e">00065</a> <span class="preprocessor">#define ACCESS_IN_BUFFER      0x01</span>
<a name="l00066"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#9219d6d54b3a605749fb34c09adc4217">00066</a> <span class="preprocessor"></span><span class="preprocessor">#define ACCESS_OUT_BUFFER     0x02</span>
<a name="l00067"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#77f52660fb0135a9d0371d2bb948d2bb">00067</a> <span class="preprocessor"></span><span class="preprocessor">#define ACCESS_REGFILE        0x04</span>
<a name="l00068"></a>00068 <span class="preprocessor"></span><span class="comment">// read/write access to all the buffers, depending on offset the buffer is choosen, IN-&gt;OUT-&gt;REG</span>
<a name="l00069"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#4cd1f71bf8288ac61efa085ae8f91533">00069</a> <span class="preprocessor">#define ACCESS_ALL            (ACCESS_IN_BUFFER|ACCESS_OUT_BUFFER|ACCESS_REGFILE)</span>
<a name="l00070"></a>00070 <span class="preprocessor"></span><span class="comment">// read access to msg out buffer and write access to msg in buffer, reg access via ioctl commands</span>
<a name="l00071"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#0c2ba86c61c55c418a226ebd2b055ef0">00071</a> <span class="preprocessor">#define ACCESS_REGIONS        0x08</span>
<a name="l00072"></a>00072 <span class="preprocessor"></span>
<a name="l00073"></a>00073 <span class="comment">// version string</span>
<a name="l00074"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#52c6ae309b7b39b9dbcc576040986b97">00074</a> <span class="preprocessor">#define VERSION_STRING_SIZE 20</span>
<a name="l00075"></a>00075 <span class="preprocessor"></span><span class="preprocessor">#ifdef NODEBUG</span>
<a name="l00076"></a>00076 <span class="preprocessor"></span><span class="preprocessor">#define RELEASETYPE "release"</span>
<a name="l00077"></a>00077 <span class="preprocessor"></span><span class="preprocessor">#else //NODEBUG</span>
<a name="l00078"></a><a class="code" href="dcscMsgBufferInterface_2driver__include_2dcs__driver_8h.html#6bfbaae758f8a232d11fb2eb2bf81609">00078</a> <span class="preprocessor"></span><span class="preprocessor">#define RELEASETYPE "debug"</span>
<a name="l00079"></a>00079 <span class="preprocessor"></span><span class="preprocessor">#endif //NODEBUG</span>
<a name="l00080"></a>00080 <span class="preprocessor"></span>
<a name="l00081"></a>00081 <span class="preprocessor">#endif //__DCS_DRIVER_H</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on 12 Nov 2013 for RCU linux tools and drivers for the DCS board  by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
